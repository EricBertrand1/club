{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}
<div class="container py-5">

  {# Titre centré avec fond + bouton à droite #}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div class="page-title-wrap">
      <h1 class="page-title">Club</h1>
    </div>
    {# en haut à droite #}
    <div>
      <div class="d-flex align-items-center gap-2">
        {# Bouton de signalement (à gauche) #}
        <a class="btn btn-warning" id="report-button"
          href="{{ path('report_new') }}">Signaler un problème</a>

        {% if app.user %}
          <div class="btn-group">
            <button class="btn btn-outline-primary dropdown-toggle" data-bs-toggle="dropdown">
              {{ app.user.userIdentifier }}
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="{{ path('account_password') }}">Changer le mot de passe</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="{{ path('app_logout') }}">Se déconnecter</a></li>
            </ul>
          </div>
        {% else %}
          <a class="btn btn-outline-primary d-flex align-items-center" id="login-button"
            href="{{ path('app_login') }}">
            <img src="{{ asset('images/menu/account circle.png') }}" alt="Login" class="me-2" style="width:20px;height:20px;">
            <span>Se connecter</span>
          </a>
        {% endif %}
      </div>
    </div>

  </div>

  {# Liste des rubriques (avec image spécifique) #}
  {% set items = [
  {label:'Agenda',     img:'agenda.jpg',      href:path('agenda', {'weekOffset': 0})},
  {label:'Annuaire',   img:'annuaire.jpg',    href:path('annuaire_index')},
  {label:'Astuces',    img:'astuces.jpg',     href:'#'},
  {label:'Boutique',   img:'boutique.jpg',    href:path('boutique_index')},
  {label:'Castellum',  img:'castellum.jpg',    href:path('castellum_index')},
  {label:'Chants',     img:'chants.jpg',      href:'#'},
  {label:'Coaching',   img:'coaching.jpg',    href:path('coaching_index')},
  {label:'Formation',  img:'formation.jpg',   href:path('formation_index')},
  {label:'Projets',    img:'projets.jpg',     href:path('projets_index')},
  {label:'Production', img:'production.jpg',  href:'#'},
  {label:'Annonces',   img:'Annonces.jpg',    href:'#'},
  {label:'Services',   img:'services.jpg',    href:'#'}
] %}


  <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-4 g-4">
  {% for it in items %}
    <div class="col">
      <a href="{{ it.href }}" class="text-decoration-none d-block">
        <figure class="m-0">
          <div class="menu-box {% if it.opaque|default(false) %}opaque{% endif %}">
            <img src="{{ asset('images/menu/' ~ it.img) }}" alt="{{ it.label }}">
          </div>
          <figcaption class="menu-caption">{{ it.label }}</figcaption>
        </figure>
      </a>
    </div>
  {% endfor %}
  </div>

</div>
{% endblock %}
