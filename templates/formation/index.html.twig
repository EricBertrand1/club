{% extends 'base.html.twig' %}
{% block title %}Formation — Catégories{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <style>
    .cat-chip{
      display:inline-block; padding:.35rem .55rem; border-radius:.5rem;
      font-weight:600; line-height:1.1;
    }
    /* 0=noir 100=marron 200=rouge 300=orange 400=jaune 500=vert 600=bleu 700=violet 800=gris 900=blanc */
    .cat-000{ background:#000000; color:#ffffff; }            /* noir */
    .cat-100{ background:#8B4513; color:#ffffff; }            /* marron */
    .cat-200{ background:#b91c1c; color:#ffffff; }            /* rouge */
    .cat-300{ background:#f97316; color:#ffffff; }            /* orange */
    .cat-400{ background:#facc15; color:#111827; }            /* jaune -> texte foncé */
    .cat-500{ background:#22c55e; color:#111827; }            /* vert  -> texte foncé */
    .cat-600{ background:#3b82f6; color:#ffffff; }            /* bleu */
    .cat-700{ background:#8b5cf6; color:#ffffff; }            /* violet */
    .cat-800{ background:#6b7280; color:#ffffff; }            /* gris */
    .cat-900{ background:#ffffff; color:#111827; border:1px solid #e5e7eb; } /* blanc + bordure */
  </style>
{% endblock %}

{% block body %}
<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h5 m-0">Formation — Catégories</h1>
    <a class="btn btn-outline-secondary" href="{{ path('app_home') }}">Quitter</a>
  </div>

  <div class="card">
    <div class="card-body p-0">
      <table class="table table-hover m-0 align-middle">
        <thead class="table-light">
          <tr>
            <th>Catégorie</th>
            <th class="text-end">Sous-catégories</th>
          </tr>
        </thead>
        <tbody>
        {# labels = tableau code => libellé / byCode = code => liste des sous-cats #}
        {% for code, label in labels %}
          {% set subs = byCode[code] ?? [] %}
          <tr onclick="location.href='{{ path('formation_category', { code: code }) }}'" style="cursor:pointer">
            <td>
              <span class="cat-chip cat-{{ code }}">{{ code }} — {{ label }}</span>
            </td>
            <td class="text-end">{{ subs|length }}</td>
          </tr>
        {% else %}
          <tr>
            <td colspan="2" class="text-muted">Aucune catégorie.</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
