{% extends 'base.html.twig' %}
{% block title %}Formation — Catégories{% endblock %}

{% block body %}
<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h5 m-0">Formation — Catégories</h1>
    <a class="btn btn-outline-secondary" href="{{ path('app_home') }}">Quitter</a>
  </div>

  <div class="card">
    <div class="card-body p-0">
      <table class="table table-hover m-0 align-middle">
        <thead class="table-light">
          <tr>
            <th>Catégorie</th>
            <th class="text-end">Sous-catégories</th>
          </tr>
        </thead>
        <tbody>
        {# labels = tableau code => libellé / byCode = code => liste des sous-cats #}
        {% for code, label in labels %}
          {% set subs = byCode[code] ?? [] %}
          <tr onclick="location.href='{{ path('formation_category', { code: code }) }}'" style="cursor:pointer">
            <td>
              <strong class="text-monospace">{{ code }}</strong>&nbsp;—&nbsp;{{ label }}
            </td>
            <td class="text-end">{{ subs|length }}</td>
          </tr>
        {% else %}
          <tr>
            <td colspan="2" class="text-muted">Aucune catégorie.</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
